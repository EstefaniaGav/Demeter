use BasededatosDemeter

CREATE TABLE Rol (
    ID_Rol INT IDENTITY(1,1) PRIMARY KEY,
    Nombre_Rol VARCHAR(50)
);
-- Creación de la tabla Usuarios
CREATE TABLE Usuarios (
    ID_Usuario INT IDENTITY(1,1) PRIMARY KEY,
    Cedula_Usuario VARCHAR(50),
    Nombre_Usuario VARCHAR(50),
    Contraseña VARCHAR(50),
    ID_Rol INT FOREIGN KEY REFERENCES Rol(ID_Rol)
);


CREATE TABLE Insumos (
    ID_Insumo INT IDENTITY(1,1) PRIMARY KEY,
    Nombre_Insumo VARCHAR(50),
    Fecha_Vencimiento DATETIME DEFAULT GETDATE() NOT NULL,
    Cantidad_Insumo SMALLINT,
    Imagen VARCHAR(MAX),
	ID_Usuario INT FOREIGN KEY REFERENCES Usuarios(ID_Usuario)
);


-- Creación de la tabla Compras
CREATE TABLE Compras (
    ID_Compra INT IDENTITY(1,1) PRIMARY KEY,
    Fecha_Compra  datetime NOT NULL default getdate(),
    Valor_Compra DECIMAL(10, 2),
    Nombre_Insumo_C VARCHAR(50),
    ID_Usuario INT FOREIGN KEY REFERENCES Usuarios(ID_Usuario)
);

-- Creación de la tabla Detalle_Compras
CREATE TABLE Detalle_Compras (
	ID_DetalleCompra int identity primary key,
    ID_Insumo INT FOREIGN KEY REFERENCES Insumos(ID_Insumo),
    Cantidad_I SMALLINT,
    ID_Compra INT FOREIGN KEY REFERENCES Compras(ID_Compra),
	ID_Usuario INT FOREIGN KEY REFERENCES Usuarios(ID_Usuario)
);

CREATE TABLE Productos (
    ID_Producto INT IDENTITY(1,1) PRIMARY KEY,
    Nombre_Producto VARCHAR(100),
    Precio DECIMAL(10, 2),
    Imagen VARCHAR(MAX),
    ID_Usuario INT FOREIGN KEY REFERENCES Usuarios(ID_Usuario)
);

CREATE TABLE Ventas (
    ID_Venta INT IDENTITY(1,1) PRIMARY KEY,
    Fecha datetime NOT NULL default getdate(),
    Venta_Rapida BIT,
    Iva AS (Total * 0.19),
    Descuento DECIMAL(10, 2),
    SubTotal DECIMAL(10, 2),
    Total DECIMAL(10, 2),
    ID_Usuario INT FOREIGN KEY REFERENCES Usuarios(ID_Usuario),
	ID_Producto INT FOREIGN KEY REFERENCES Productos(ID_Producto)
);

-- Creación de la tabla Detalle_Ventas
CREATE TABLE Detalle_Ventas (
	ID_DetalleVenta int identity primary key,
    ID_Producto INT FOREIGN KEY REFERENCES Productos(ID_Producto),
    Cantidad SMALLINT,
	precio DECIMAL(10, 2),
    ID_Venta INT FOREIGN KEY REFERENCES Ventas(ID_Venta)
);

-- Creación de la tabla Receta
CREATE TABLE Receta (
     ID_Receta int identity primary key,
    ID_Producto INT FOREIGN KEY REFERENCES Productos(ID_Producto),
    Cantidad SMALLINT,
    ID_Insumo INT FOREIGN KEY REFERENCES Insumos(ID_Insumo)
);

